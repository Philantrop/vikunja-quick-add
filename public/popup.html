<!--
  Vikunja Quick Add - Chrome Extension
  Copyright (C) 2025 Wulf C. Krueger

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="color-scheme" content="light dark">
  <title>Vikunja Quick Add</title>
  <link rel="stylesheet" href="../assets/lib/flatpickr.min.css">
  <link rel="stylesheet" href="../assets/styles/popup.css">
</head>
<body>
  <h2>Add Vikunja Task</h2>

  <div id="notConfigured" class="warning" style="display:none;">
    ⚠️ Please <a href="#" id="openOptions">configure your settings</a> first
  </div>

  <form id="taskForm">
    <div class="form-group">
      <label for="taskTitle">Task Title <abbr title="required" aria-label="required">*</abbr></label>
      <textarea id="taskTitle" placeholder="Enter task title..." autofocus aria-required="true"></textarea>
      <div class="quick-fill" role="group" aria-label="Quick fill options for task title">
        <a href="#" id="fillPageTitle" role="button">Use page title</a> ·
        <a href="#" id="fillPageUrl" role="button">Use page URL</a> ·
        <a href="#" id="fillBoth" role="button">Use both</a>
      </div>
    </div>

    <div class="form-group">
      <label for="taskDescription">Description</label>
      <textarea id="taskDescription" placeholder="Task description..." aria-describedby="descriptionHelp"></textarea>
      <div class="quick-fill" role="group" aria-label="Quick fill options for description">
        <a href="#" id="fillDescriptionUrl" role="button">Insert clickable link</a> ·
        <a href="#" id="fillDescriptionTitleUrl" role="button">Insert title + link</a> ·
        <a href="#" id="clearDescription" role="button">Clear</a>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="projectSelect">Project <abbr title="required" aria-label="required">*</abbr></label>
        <select id="projectSelect" aria-required="true">
          <option value="">Loading projects...</option>
        </select>
        <div class="quick-fill">
          <a href="#" id="toggleFavorites" role="button" style="display:none;" aria-label="Toggle favorites filter">★ Show favorites only</a>
        </div>
      </div>

      <div class="form-group">
        <label for="priority">Priority</label>
        <select id="priority">
          <option value="0">None</option>
          <option value="1">Low</option>
          <option value="2">Medium</option>
          <option value="3">High</option>
          <option value="4">Urgent</option>
          <option value="5">DO NOW</option>
        </select>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group" id="dueDateFormGroup">
        <label for="dueDate">Due Date</label>
        <input type="datetime-local" id="dueDate">
        <div class="quick-fill date-shortcuts" role="group" aria-label="Date shortcuts">
          <a href="#" id="dueDateToday" role="button">Today</a>
          <a href="#" id="dueDateTomorrow" role="button">Tomorrow</a>
          <a href="#" id="dueDateNextWeek" role="button">Next Week</a>
          <a href="#" id="dueDateClear" role="button">Clear</a>
        </div>
      </div>

      <div class="form-group" id="reminderDateFormGroup">
        <label for="reminderDate">Reminder</label>
        <input type="datetime-local" id="reminderDate">
        <div class="quick-fill date-shortcuts" role="group" aria-label="Reminder shortcuts">
          <a href="#" id="reminderToday" role="button">Today</a>
          <a href="#" id="reminderTomorrow" role="button">Tomorrow</a>
          <a href="#" id="reminderNextWeek" role="button">Next Week</a>
          <a href="#" id="reminderClear" role="button">Clear</a>
        </div>
      </div>
    </div>

    <div class="form-group" id="labelsFormGroup">
      <label for="labelInput">Labels</label>
      <div id="labelContainer" class="label-container">
        <input type="text" id="labelInput" placeholder="Search or create labels..." autocomplete="off" aria-describedby="labelHelp">
        <div id="selectedLabels" class="selected-labels" role="list" aria-label="Selected labels"></div>
        <div id="labelSuggestions" class="label-suggestions" role="listbox" aria-label="Label suggestions"></div>
      </div>
    </div>

    <div class="button-container">
      <button type="button" id="settingsBtn" class="icon-button" aria-label="Open settings" title="Settings">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
      </button>
      <button type="button" id="clearBtn" class="icon-button" aria-label="Clear all fields" title="Clear all fields" style="display:none;">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 6h18"></path>
          <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
          <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
          <line x1="10" x2="10" y1="11" y2="17"></line>
          <line x1="14" x2="14" y1="11" y2="17"></line>
        </svg>
      </button>
      <button type="submit" id="submitBtn">Add Task</button>
    </div>
  </form>

  <div id="status" class="status" role="status" aria-live="polite"></div>

  <script src="../assets/lib/flatpickr.min.js"></script>
  <script src="../src/popup/popup.js" type="module"></script>
</body>
</html>
