<!--
  Vikunja Quick Add - Chrome Extension
  Copyright (C) 2025 Wulf C. Krueger

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="color-scheme" content="light dark">
  <title>Vikunja Quick Add - Settings</title>
  <link rel="stylesheet" href="../assets/styles/options.css">
</head>
<body>
  <div class="container">
    <h1>Vikunja Quick Add Settings</h1>
    <p class="subtitle">Configure your Vikunja connection and preferences</p>

    <div class="info-box">
      <h3>How to get your API token</h3>
      <p>
        1. Log in to your Vikunja instance<br>
        2. Go to Settings → API Tokens<br>
        3. Create a new token with at least "tasks:write" and "projects:read" permissions<br>
        4. Copy the token and paste it below
      </p>
    </div>

    <form id="settingsForm">
      <div class="form-group">
        <label for="apiUrl">Vikunja API URL</label>
        <input type="url" id="apiUrl" placeholder="https://vikunja.example.com" required aria-required="true">
        <div class="help-text">Your Vikunja instance URL (without trailing slash or /api)</div>
      </div>

      <div class="form-group">
        <label for="apiToken">API Token</label>
        <input type="password" id="apiToken" placeholder="Your API token" required aria-required="true">
        <div class="help-text">Create a token in Vikunja Settings → API Tokens</div>
      </div>

      <div class="form-row">
        <div class="form-group half">
          <label for="dateFormat">Date format</label>
          <select id="dateFormat">
            <option value="DD.MM.YYYY">15.11.2025</option>
            <option value="MM/DD/YYYY">11/15/2025</option>
            <option value="YYYY-MM-DD">2025-11-15</option>
          </select>
        </div>

        <div class="form-group half">
          <label for="timeFormat24h">Time format</label>
          <div class="switch-group">
            <span class="switch-label" id="timeFormatLabel12h" aria-hidden="true">2:03 p.m.</span>
            <label class="switch">
              <input type="checkbox" id="timeFormat24h" aria-label="Use 24-hour time format">
              <span class="slider"></span>
            </label>
            <span class="switch-label" id="timeFormatLabel24h" aria-hidden="true">14:03</span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="taskTitle">Task title</label>
        <select id="taskTitle">
          <option value="page-title">Page title</option>
          <option value="page-url">Page URL</option>
          <option value="title-url">Page title + URL</option>
        </select>
      </div>

      <div class="form-group">
        <label for="taskDescription">Task description</label>
        <select id="taskDescription">
          <option value="title-url">Page title + URL</option>
          <option value="url">Page URL</option>
          <option value="empty">Empty</option>
        </select>
      </div>

      <div class="form-group">
        <label for="defaultReminderDate">Default reminder date</label>
        <select id="defaultReminderDate">
          <option value="">Not set</option>
          <option value="same-day">Same day</option>
          <option value="day-before">Day before</option>
          <option value="week-before">Week before</option>
        </select>
      </div>

      <div class="form-group">
        <label for="defaultReminderTime">Default reminder time</label>
        <div class="time-input-group">
          <select id="defaultReminderTime">
            <!-- Options will be populated by JavaScript -->
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="defaultList">Default list</label>
        <select id="defaultList">
        </select>
        <div class="help-text">Pre-select this list when adding tasks</div>
      </div>

      <div class="form-group">
        <label for="listSortOrder">List Sort Order</label>
        <select id="listSortOrder">
          <option value="smart">Smart (Favorites → Recent → Alphabetical)</option>
          <option value="alphabetical">Alphabetical</option>
          <option value="favorites-alphabetical">Favorites → Alphabetical</option>
          <option value="recent-alphabetical">Recent → Alphabetical</option>
        </select>
        <div class="help-text">How to sort lists in both options and popup</div>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" id="showLabels">
          Show Labels
        </label>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" id="showReminderDate">
          Show Reminder date
        </label>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" id="showDueDate">
          Show Due date
        </label>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" id="quickAddContextMenu">
          Quick add in the context menu
        </label>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" id="largeTouchTargets">
          Compact mode
        </label>
        <div class="help-text">Use smaller buttons and controls in the popup for a more condensed interface.</div>
      </div>

      <div class="form-group">
        <label>Show these buttons in the extension window</label>
        <div class="icon-buttons-group">
          <button type="button" class="icon-btn active" id="settingsIconBtn" title="Settings" aria-label="Toggle settings button visibility">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
          </button>
          <span class="button-description">Settings - Opens the options page</span>
          <button type="button" class="icon-btn" id="clearIconBtn" title="Clear all fields" aria-label="Toggle clear button visibility">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 6h18"></path>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
              <line x1="10" x2="10" y1="11" y2="17"></line>
              <line x1="14" x2="14" y1="11" y2="17"></line>
            </svg>
          </button>
          <span class="button-description">Clear - Empties all pre-filled fields</span>
        </div>
        <div class="help-text">Configure which buttons appear in the popup. Click to toggle each button.</div>
      </div>

      <div class="button-row">
        <button type="submit">Save Settings</button>
        <button type="button" class="secondary" id="testConnection">Test Connection</button>
      </div>
    </form>

    <div id="status" class="status" role="status" aria-live="polite"></div>

    <footer class="footer">
      <p>v<span id="version"></span> • Made with AI by <a href="mailto:wk@mailstation.de">Wulf C. Krueger</a></p>
    </footer>
  </div>

  <script src="../src/options/options.js" type="module"></script>
</body>
</html>
